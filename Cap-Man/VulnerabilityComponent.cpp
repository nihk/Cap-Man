#include "VulnerabilityComponent.h"

VulnerabilityComponent::VulnerabilityComponent() 
	: mIsVulnerable(false)
	, mIsTiming(false)
	, mAccumulatedTime(0.0f)
	, mVulnerableDuration(-1.0f) {
}

VulnerabilityComponent::~VulnerabilityComponent() {
}

void VulnerabilityComponent::makeTemporarilyVulnerable(float howLong) {
	mIsTiming = true;
	mIsVulnerable = true;
	mVulnerableDuration = howLong;
}

void VulnerabilityComponent::reset() {
	mIsTiming = false;
	mIsVulnerable = false;
	mAccumulatedTime = 0.0f;
	mVulnerableDuration = -1.0f;
}

void VulnerabilityComponent::update(float delta) {
	if (mIsTiming) {
		mAccumulatedTime += delta * 1000.0f;
		if (mAccumulatedTime >= mVulnerableDuration) {
			reset();
		}
	}
}
